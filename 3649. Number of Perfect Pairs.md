# Medium

You are given an integer array $nums$.

A pair of indices $(i, j)$ is called perfect if the following conditions are satisfied:

- $i < j$
- Let $a = nums[i], b = nums[j]$. Then:
  - $\min(|a - b|, |a + b|) \leq min(|a|, |b|)$
  - $\max(|a - b|, |a + b|) \geq max(|a|, |b|)$

Return the number of distinct perfect pairs.

```cpp
class Solution {
public:
    long long perfectPairs(vector<int>& nums) {
        int n = nums.size();

        // Convert all elements to their absolute values
        for (int i = 0; i < n; ++i) {
            nums[i] = abs(nums[i]);
        }

        // Sort the array in non-decreasing order
        sort(nums.begin(), nums.end());

        long long j = 0;        // Pointer to find the upper bound
        long long ans = 0;      // Result to store the count of perfect pairs

        // For each element nums[i], find the maximum j such that
        // nums[j] <= 2 * nums[i] and count elements between i and j
        for (int i = 0; i < n; ++i) {
            // Increment j while nums[j] is within the allowed range
            while (j < n && nums[j] <= 2LL * nums[i]) {
                ++j;
            }

            // Count pairs with the i-th element
            // Subtract i + 1 to exclude current and previous elements
            ans += (j - i - 1);
        }

        return ans;
    }
};
```
