# Medium

You are given an integer array $weight$ of length $n$, representing the weights of $n$ parcels arranged in a straight line. A shipment is defined as a contiguous subarray of parcels. A shipment is considered balanced if the weight of the last parcel is strictly less than the maximum weight among all parcels in that shipment.

Select a set of non-overlapping, contiguous, balanced shipments such that each parcel appears in at most one shipment (parcels may remain unshipped).

Return the maximum possible number of balanced shipments that can be formed.

```cpp
class Solution {
public:
    // Returns the maximum number of shipments that are "balanced"
    // A shipment is balanced if its weight is less than the previous upper bound
    int maxBalancedShipments(vector<int>& weight) {
        int n = (int)weight.size();
        if (n == 0) return 0;

        int ub = weight[0];  // Current upper bound (weight of previous shipment)
        int ans = 0;         // Count of balanced shipments
        int i = 1;           // Index for iterating over shipments

        while (i < n) {
            if (weight[i] < ub) {
                ++ans;       // Found a balanced shipment

                ++i;         // Move to next shipment
                if (i >= n)
                    break;
            }
            // Update upper bound to current shipment's weight and move forward
            ub = weight[i];
            ++i;
        }

        return ans;
    }
};
```
